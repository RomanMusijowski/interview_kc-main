# ============================================
# Application Identity
# ============================================
quarkus.application.name=token-service
quarkus.http.port=8081
quarkus.http.host=0.0.0.0

# ============================================
# Logging Configuration
# ============================================
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO

# ============================================
# JSON Serialization
# ============================================
quarkus.jackson.timezone=UTC
quarkus.jackson.write-dates-as-timestamps=false

# ============================================
# Kafka Configuration
# ============================================
quarkus.kafka.devservices.enabled=false
finance.kafka.bootstrap-servers=localhost:9092
finance.kafka.topic=user-transactions

# ============================================
# Keycloak Configuration
# Uses JWT client assertion (signed with private key) for authentication
# ============================================
finance.keycloak.base-url=http://localhost:8080
finance.keycloak.realm=finance-app
finance.keycloak.client-id=finance-client
finance.keycloak.redirect-uri=http://localhost:8081/token

# ============================================
# KeyStore Configuration (Required - KeyStore only)
# ============================================
finance.keycloak.keystore-path=${KEYCLOAK_KEYSTORE_PATH:../../../../../keys/keystore.jks}
finance.keycloak.keystore-password=${KEYCLOAK_KEYSTORE_PASSWORD:changeit}
finance.keycloak.keystore-alias=${KEYCLOAK_KEYSTORE_ALIAS:finance-client}

# ============================================
# REST Client Configuration
# ============================================
keycloak-api/mp-rest/url=${finance.keycloak.base-url}
keycloak-api/mp-rest/scope=jakarta.inject.Singleton
# Enable JSON serialization for REST client
quarkus.rest-client.keycloak-api.json.enabled=true

transaction-api/mp-rest/url=http://localhost:8082
transaction-api/mp-rest/scope=jakarta.inject.Singleton

# ============================================
# Security & CORS
# ============================================
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:3000,http://localhost:8080,http://localhost:8081
quarkus.http.cors.headers=accept, authorization, content-type, x-requested-with
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS

# ============================================
# OIDC Configuration
# ============================================
# OIDC Configuration for Keycloak token validation
quarkus.oidc.auth-server-url=http://localhost:8080/realms/finance-app
quarkus.oidc.client-id=finance-client
quarkus.oidc.application-type=service
quarkus.oidc.bearer-only=true